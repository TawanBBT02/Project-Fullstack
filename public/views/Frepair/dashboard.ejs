<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/style.css">
    <title>Dashboard - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°</title>
</head>
<body>
    <div class="container" style="max-width: 1100px;">
        <h1>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏° (Repair Dashboard)</h1>
        
        <div class="table-responsive">
            <table>
                <thead>
                    <tr>
                        <th width="8%">ID</th>
                        <th width="20%">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
                        <th width="20%">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</th>
                        <th width="15%">‡∏ä‡πà‡∏≤‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö</th>
                        <th width="15%">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°</th>
                        <th width="12%">‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô</th>
                        <th width="10%">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (typeof repairs !== 'undefined' && repairs.length > 0) { %>
                        <% repairs.forEach(repair => { %>
                        <tr>
                            <td><strong><%= repair.repair_id %></strong></td>
                            <td><%= repair.device && repair.device.customer ? repair.device.customer.first_name : '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ä‡∏∑‡πà‡∏≠' %></td>
                            <td><%= repair.device ? repair.device.model : '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏£‡∏∏‡πà‡∏ô' %></td>
                            <td>üë®‚Äçüîß <%= repair.technician ? repair.technician.first_name : '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢' %></td>
                            <td>
                                <span class="status <%= repair.status === '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô' ? 'success' : 'pending' %>">
                                    <%= repair.status %>
                                </span>
                            </td>
                            <td>
                                <span class="status <%= repair.payment_status === '‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß' ? 'success' : 'failed' %>">
                                    <%= repair.payment_status || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ä‡∏≥‡∏£‡∏∞' %>
                                </span>
                            </td>
                            <td>
                                <div style="display: flex; justify-content: center;">
                                    <a href="/repair-detail/<%= repair.repair_id %>" class="btn-detail" style="background:#3b82f6;">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                </div>
                            </td>
                        </tr>
                        <% }) %>
                    <% } else { %>
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 20px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏°‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
        
        <div style="margin-top: 25px; display: flex; justify-content: space-between;">
            <a href="/" style="color: var(--text-gray); text-decoration: none; font-weight: 600;">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</a>
            <a href="/add-repair" class="btn-detail" style="background-color: #ea580c;">‚ûï ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡πà‡∏≠‡∏°‡πÉ‡∏´‡∏°‡πà</a>
        </div>
    </div>
</body>
</html>